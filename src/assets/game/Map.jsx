import React, { useState, useEffect } from "react";
import "./Map.css";
import Dado from "./Dado";
import axios from "axios";

const Map = () => {
  const [hoveredComuna, setHoveredComuna] = useState(null);
  const [selectedComunas, setSelectedComunas] = useState([]);
  const [attackMode, setAttackMode] = useState(false);
  const [showDice, setShowDice] = useState(false);
  const [dice1, setDice1] = useState(1);
  const [dice2, setDice2] = useState(1);
  const [diceThrow, setDiceThrow] = useState(false);
  const [comunas, setComunas] = useState([]);
  const [player, setPlayer] = useState(null);
  const [troop, setTroop] = useState(null);
  const [availableTroops, setAvailableTroops] = useState(0);
  const [comunaClickeada, setComunaClickeada] = useState(null);
  const [playerClickeado, setPlayerClickeado] = useState(null);
  const [troopClickeada, setTroopClickeada] = useState(null);
  const [troopsToAdd, setTroopsToAdd] = useState(0);
  const [playerActual, setPlayerActual] = useState(null);
  const [comuna1, setComuna1] = useState(null);
  const [comuna2, setComuna2] = useState(null);

  const handleComunaClick = (comuna) => {
    if (selectedComunas.includes(comuna)) {
      setSelectedComunas(selectedComunas.filter((c) => c !== comuna));
      setAttackMode(false);
      setShowDice(false);
      setDiceThrow(false);
    } else if (selectedComunas.length < 2) {
      setSelectedComunas([...selectedComunas, comuna]);
    }
  };

  useEffect(() => {
    if (selectedComunas.length === 1) {
      const comunaName = selectedComunas[0];
      const comuna = comunas.find((comuna) => comuna.name === comunaName);
      setComunaClickeada(comunaName);
      setPlayerClickeado(comuna.Player.name);
      setTroopClickeada(comuna.Troop.contador);
      setAvailableTroops(comuna.Player.newTroops);
    }
  }, [selectedComunas]);

  const handleAddClick = () => {
    const token = localStorage.getItem("token");
    const comuna = comunas.find((comuna) => comuna.name === comunaClickeada);
    axios
      .post(
        `${import.meta.env.VITE_BACKEND_URL}/troops/assing`,
        {
          communeID: comuna.id,
          numTroops: troopsToAdd,
        },
        {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        }
      )
      .then((res) => {
        const troop = res.data.troop;
        const infoCommunes = res.data.communes;
        setComunas(infoCommunes);
        setTroopClickeada(troop.contador);
      })
      .catch((error) => {
        if (
          error.response &&
          error.response.data &&
          error.response.data.error
        ) {
          const errorMessage = error.response.data.error;
          alert(errorMessage); // Mostrar el mensaje de error al usuario
        } else {
          console.error(error);
        }
      });
  };

  const handleMouseOver = (event) => {
    const comunaName = event.target.getAttribute("name");
    const comuna = comunas.find((comuna) => comuna.name === comunaName);
    setPlayer(comuna.Player.name);
    setTroop(comuna.Troop.contador);
    setHoveredComuna(comunaName);
  };

  const handleMouseOut = () => {
    setHoveredComuna(null);
  };

  const handleAttackClick = () => {
    const [namecomuna1, namecomuna2] = selectedComunas;
    const infoComuna1 = comunas.find((comuna) => comuna.name === namecomuna1);
    const infoComuna2 = comunas.find((comuna) => comuna.name === namecomuna2);
    setComuna1(infoComuna1);
    setComuna2(infoComuna2);
    if (!infoComuna1 || !infoComuna2) {
      // Verificar si alguno de los objetos es undefined
      alert("No se encontrÃ³ alguna de las comunas seleccionadas");
      console.log(selectedComunas);
      return;
    }
    if (infoComuna1.Player.name === infoComuna2.Player.name) {
      alert("No puedes atacar a una comuna aliada");
      return;
    }
    const token = localStorage.getItem("token");
    axios
      .get(`${import.meta.env.VITE_BACKEND_URL}/players`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      })
      .then((res) => {
        const info = res.data;
        setPlayerActual(info);
        setAttackMode(true);
        setShowDice(true);
        setDice1(1);
        setDice2(1);
      })
      .catch((err) => {
        console.error(err);
      });
  };

  const handleCancelClick = () => {
    setAttackMode(false);
    setShowDice(false);
    setSelectedComunas([]);
    setDiceThrow(false);
  };

  const handleDiceClick = () => {
    setAttackMode(false);
    const value = Math.floor(Math.random() * 6) + 1;
    const value2 = Math.floor(Math.random() * 6) + 1;
    setDice1(value);
    setDice2(value2);
    setDiceThrow(true);
    let atackerCommuneID;
    let defenderCommuneID;
    if (playerActual.id === comuna1.playerID) {
      atackerCommuneID = comuna1.id;
      defenderCommuneID = comuna2.id;
    } else {
      atackerCommuneID = comuna2.id;
      defenderCommuneID = comuna1.id;
    }
    const token = localStorage.getItem("token");
    axios
      .post(
        `${import.meta.env.VITE_BACKEND_URL}/atack`,
        {
          atackerCommuneID: atackerCommuneID,
          defenderCommuneID: defenderCommuneID,
          atackerDice: value,
          defenderDice: value2,
        },
        {
          headers: {
            Authorization: `Bearer ${token}`,
          },
        }
      )
      .then((res) => {
        const atackerTroop = res.data.atackerTroop;
        const defenderTroop = res.data.defenderTroop;
        const defenderCommune = res.data.defenderCommune;
        const message = res.data.message;
        alert(message);
        console.log(atackerTroop);
      })
      .catch((error) => {
        if (
          error.response &&
          error.response.data &&
          error.response.data.error
        ) {
          const errorMessage = error.response.data.error;
          alert(errorMessage); // Mostrar el mensaje de error al usuario
        } else {
          console.error(error);
        }
      });
  };

  const handleEndTurnClick = () => {
    const token = localStorage.getItem("token");
    axios
      .get(`${import.meta.env.VITE_BACKEND_URL}/communes`, {
        headers: {
          Authorization: `Bearer ${token}`,
        },
      })
      .then((res) => {
        const info = res.data;
        setComunas(info);
      })
      .catch((err) => {
        console.log(err);
      });
  };

  return (
    <div>
      <svg viewBox="0 0 1615.19 2153.19" width={650} height={650}>
        <path
          d="M872.7,37.11c-1.21,14.47-2.21,28.94-2,43.45.1,7.84,3.73,15,4.28,22.79.3,4.25,3.54,7.76,7.76,10.37,7.92,4.89,15.39,10.5,23.27,15.52a44,44,0,0,0,24.54,6.91c14.21,0,15.54,1.31,19.61,15.25,4.24,14.49,6.77,29.27,5.9,44.38-.67,11.58,2.18,21.76,9.68,30.6,3.36,4,4.72,8.42,5.09,13.68,1.08,15.15.38,30.33,1.24,45.47.16,2.79-1,4.65-3,6.44-5.07,4.52-11.11,7.76-15.67,13.09-4.3,5-6.07,11-8.66,16.72-1.29,2.86-.06,5.81,2.13,7.75,8.09,7.19,9.59,16,7.24,26.07-.86,3.69-.81,7.61-1.06,11.43s-.67,6.81-5.32,8.78c-5.19,2.19-6.8,8.32-9.32,13.18-1.52,2.93-1.41,7.41-4.14,8.71-2.38,1.14-6.08-.57-9.21-.88-2.65-.26-5.32-.44-8-.46-6,0-12,0-16.84-4.56a5.57,5.57,0,0,0-3.68-1.37c-6.73.31-10.53-3.84-14.22-8.6-3.27-4.2-7-8.06-10.49-12.07-1.45-1.65-3.05-3.57-5.24-3.57-5,0-8.2-2.88-11.47-6.11a16.83,16.83,0,0,0-11.68-5q-15.24-.32-30.48-.58c-10.33-.18-22.69-10.33-24.44-20.52-1.05-6.11-4.22-10.69-8.62-14.77a92.8,92.8,0,0,0-34.52-20.49c-2.95-1-5.28-2.42-5.53-5.66-1.1-14.32-10.68-23.6-19.65-33.21-3.52-3.77-7-7.74-11.26-10.61-7-4.79-8.8-11.44-8.07-19.07.57-6-.92-10.77-5.58-14.62-13.85-11.43-27-23.81-42.4-33.2-4.54-2.76-9.68-3.58-14.77-4.34-12.08-1.8-23.27-5.67-33.06-13.17a22.29,22.29,0,0,0-11.57-4.22c-7.39-.8-14.86-.85-21.73,1.77-7.66,2.93-15.48,3.51-23.43,4.19-3.6.31-4.88-.91-4.88-4.31,0-3-.17-6-.39-9-.2-2.71-1.3-3.76-4.47-3.84-18.31-.43-36.09,3.3-54,6.32-14.34,2.43-28.9,2.05-43.35,2.93-22.44,1.37-44.93,2-67.39,3.17a14.78,14.78,0,0,1-10.94-3.61c-14.87-12.33-29.67-24.7-43.57-38.17-9.21-8.93-20.84-14.1-33-18.14-11.65-3.87-11.91-4.88-7.24-16.31.44-1.08,1-2.12,1.41-3.2,2.12-5.25,3-11.65,6.68-15.43s10.07-4.37,15-6.94C341.11,39.72,382.66,25.6,423.16,9Q459.9-6.09,496.4-21.74c16.22-7,32.25-14.38,48.33-21.65a25.41,25.41,0,0,0,11.71-9.81c11.88-19.52,30.28-31.67,50.27-40.35,10.48-4.55,21.24-9.32,32.41-12.59a19.52,19.52,0,0,1,9.37-.51,31.59,31.59,0,0,0,23.89-4.76c7.46-4.79,15-9.16,24.06-10.42,6.65-.92,11.3-6.19,16.77-9.59,3.72-2.31,7.15-3.46,11.67-2.9,12.87,1.61,25.61,4.5,38.69,4.37,3.13,0,7.07-1.09,9.06,2.39,2.36,4.14.94,11.59-2.54,14.93-5.64,5.42-11.45,10.6-16,17.07-8.51,12-7,24.56,4.26,34.07C764.6-56.2,767.55-49,769-41.14a33,33,0,0,1,.85,6.43c-.16,10.68,5.8,15.84,15.34,19.14C795.14-12.14,803-4.12,812.82-.65,823.52,3.11,834.2,7.81,846,7.23c10.51-.52,18.42,4.62,25.43,11.7,1.3,1.32,1.25,3,1.26,4.69C872.71,28.12,872.7,32.62,872.7,37.11Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Las Condes"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Las Condes")}
          className={
            selectedComunas.includes("Las Condes") ? "selected" : "lightblue"
          }
        />
        <path
          d="M-193.76,410.25q-.79,24.47-1.56,48.94a9.77,9.77,0,0,1-2.5,6.34,58.15,58.15,0,0,0-11.57,21.34c-4.29,14.18-8.24,28.49-14,42.17-1.44,3.4.33,4.57,3.28,5,9.91,1.57,19.94,1.15,29.9,1.62s20,.77,29.93,1.46c9.07.63,14.59,10.58,9.9,18.36-6.88,11.41-12.93,23.29-19.88,34.62-2.44,4-7.39,6.23-9.81,10.75-9.83,18.36-21.53,35.61-32.62,53.2-9.49,15.05-19.64,29.77-30.54,43.83-10.14,13.08-18.23,27.48-27.92,40.75-16.22,22.21-27.81,47.37-44.93,69-2.62,3.3-5.06,4.71-9.2,4-16.23-2.89-32.5-5.55-48.74-8.4-5.88-1-10-5.06-14.1-9-21.5-20.65-42.87-41.43-64.43-62-2.5-2.39-1.87-3.6.23-5.46q11.63-10.24,23.11-20.62a68.16,68.16,0,0,0,7.8-7.71c3.23-4,2.73-6.1-1.46-9-10.49-7.37-20.91-14.86-31.55-22-3.9-2.62-5.18-5.45-3.94-10a168.29,168.29,0,0,1,8.92-24.91,57.07,57.07,0,0,0,4.79-30.68c-1.49-12.57-3-25.16-3.86-37.78a355.46,355.46,0,0,1,1.39-60.37c.93-8.81,5.11-14.13,14.65-16.23,26.35-5.81,52.22-13.54,78-21.45,6.24-1.91,12.93-1.47,19.1-3.71,2.31-.84,5.32-1.14,5.13-4.47-.17-3-3-3-5.22-3.67q-19.54-6.13-39-12.42c-1.05-.34-2.84-.8-2.43-2s1.92-2.2,3.12-3c16.11-11.25,32.29-22.41,48.38-33.7,9-6.31,17.77-12.92,27.4-18.33,5.4-3,6.11-6.1,3.58-11.71-3.71-8.24-9.25-15.41-13.7-23.22-3.61-6.33-8.11-12.35-6.84-20.36.41-2.58,1.23-4,4.21-3.24,19.77,4.89,40.36,4.8,60.09,10,8.05,2.11,16.18,3.94,24,6.73,4.51,1.6,6.45,4.41,5.45,9.15-.48,2.28-1.28,4.75,1.22,6.34s4.72-.2,6.82-1.5a1.56,1.56,0,0,0,.4-.29c7.07-8.65,15.37-6.49,23.91-2.8a218.64,218.64,0,0,1,22.37,11.08c2,1.14,3.71,2.33,3.29,5-1.38,8.72-.87,17.62-2.84,26.3-1.62,7.13-4.31,9.14-11.51,7.72-2.12-.42-4.17-1.23-6.3-1.58C-191.69,400.9-193.46,402.43-193.76,410.25Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="Maipu"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Maipu")}
          className={selectedComunas.includes("Maipu") ? "selected" : "orange"}
        />
        <path
          d="M484.76-270.55c-1-3.41-.27-6.21,4.52-7.54,3.7-1,3.82-4,.4-6.71-5.44-4.39-10.94-8.72-16.66-12.73-7.27-5.09-12.67-11.81-17.24-19.21-4.08-6.61-2.27-11,5.18-13.23,4.3-1.27,8.65-2.24,13.28-1.41,3.87.7,7.06-.41,7.54-5.06a2.6,2.6,0,0,1,3-2.61c1.87,0,4,.14,5.13,1.52,1.41,1.65-.9,2.48-1.62,3.6-3,4.6-2.63,6.85,1.72,10.16,10.45,7.94,12.92,7.84,23.19-.79,3.92-3.29,7-7.1,8.18-12.23.93-4.11,3.56-5.88,7.73-6.51,10.36-1.57,20.68-3.41,31-5.42,10.64-2.08,21.24-1,31.86-.06,3,.26,5.62,2,8.21,3.52,26.27,15.42,54.28,26.89,83.08,36.51,9.6,3.21,19.53,3.62,29.36.2,19.25-6.71,39.26-10.35,59.07-14.85a11.27,11.27,0,0,1,10.25,2.15c6,4.72,12.24,9,17,15.31,3.49,4.61,8.91,6.54,14.3,1.86a49.49,49.49,0,0,0,4-3.76c6.54-7.1,13.86-8.29,21.58-2.52,17.51,13.08,36.2,24.37,54.6,36.08q29.92,19,60.43,37.14c4.6,2.73,4.75,5,3.07,9.47-4.23,11.23-10.5,21.11-18,30.35-1.76,2.16-3.79,2.88-6.38,3.27-17,2.57-33.91,5.16-50.82,8-8.87,1.47-9.8,2.71-10.78,11.48a5.3,5.3,0,0,0-.17,1.48c1.86,9.61-4.84,13.53-11.62,17.18-3.78,2-6.77,4.23-6.38,9.08a4.39,4.39,0,0,1-1.65,3.51q-13.78,13-27.57,26.1c-.67.64-1.36,1.72-2.5,1.15s-.76-1.74-.87-2.69c-.19-1.66-.23-3.33-.45-5-.68-5-3.44-7.81-8.53-8.16a55.29,55.29,0,0,0-6.49-.26c-3,.15-5.11-.69-6.43-3.56-1.69-3.68-4.79-4.88-8.67-4.28-2.31.36-4.73.38-6.89,1.16-15.42,5.58-30.88,2.19-46.34.39a19,19,0,0,1-3-.51c-11.95-3.37-22.29-.72-31,8.14a10.54,10.54,0,0,1-6.65,3.23c-9.94.7-18,5.78-25.89,11-6,4-12.46,5.85-19.46,4.56-9.68-1.77-18,1.82-26.32,5.75a53.53,53.53,0,0,1-4.93,2.4c-8.44,3-9.54,2.8-12.21-3.93-1.63-4.12-5.89-3.85-9.53-3.92a403,403,0,0,0-44.93,1.84c-7.13.67-14.33.69-21.43,1.57s-12.75-1.5-18.14-5.45c-13.72-10.06-26.31-21.49-38.91-32.86-9.93-9-21.06-14.58-34.34-15.48-8.49-.58-16.36-1.83-22.76-8.33-4.84-4.92-10.63-4.15-16-.47-2.83,2-3.64,1.27-3.77-1.86a23.67,23.67,0,0,0-.87-4.91c-.91-3.5-.44-6.39,2.43-9,3.79-3.48,7.18-7.41,10.84-11,5.16-5.11,5.76-7.06,1.39-12.85-3.16-4.19-1.84-6.34,2-8.26a93.76,93.76,0,0,0,15.35-9.3c3.8-2.93,5-6.06,2.49-10.77-3.32-6.26-3.15-13.18-1.84-20a4.49,4.49,0,0,1,1.46-2.5c7.45-5.85,14.29-12.57,23-16.68,5.26-2.49,6.58-2,8.6,3.38,2.1,5.64,4.78,11,7.34,16.4,1.53,3.24,3.55,4,6.82,2.43C483.14-259.22,485-262.1,484.76-270.55Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Lo Barnechea"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Lo Barnechea")}
          className={
            selectedComunas.includes("Lo Barnechea") ? "selected" : "lightblue"
          }
        />
        <path
          d="M615,486.85c-2.21,2-4.57,3.87-6.61,6-4.08,4.31-8.36,7.72-14.77,8.24-5.11.42-8.58,4.28-11.1,8.55-1.94,3.29-4.52,4.88-8.22,4.11-8.47-1.76-14.84,1.35-21.14,7-6.86,6.21-16.08,6.72-25,6.85-33.5.51-66.9-1.3-100.29-4-22.07-1.77-44.21-2.55-66.32-3.78-2-.11-4-.27-6-.46-2.39-.23-3.09-1.58-3.45-4-2.88-19.11,1.89-36.45,12.45-52.2,15.43-23,25.15-47.64,26.32-75.76.88-21.12,5.39-41.9,10.21-62.5,3.4-8.66,7.06-17.24,10.1-26,1.66-4.8,4.16-5.63,8.64-4.14,4.77,1.59,9.12,4.07,13.62,6.14,10.42,4.79,21.42,6.25,32.54,6.85,23.44,1.28,46.88,3.13,70.4,2,7.77-.37,14.55,3.29,21.58,5.71,9.82,3.38,10.57,3.17,13.18-6.6,1-3.86,2.11-7.7,3.15-11.56.95-3.5,3.05-5.36,6.85-5.22,8,.28,16,.29,24,.68,41.92,2,83.92,3.37,125.62,8.14,13.13,1.5,25.68,7.43,36.7,15.44,3.22,2.34,6.12,5.14,9.16,7.74a20,20,0,0,1,7,12.89c.74,5.33,2.91,9.8,7.72,12.76a64.27,64.27,0,0,1,5.91,4.61c5.56,4.4,11.65,6.66,19,6.07a144.18,144.18,0,0,1,27.95.72c3.35.39,6,1.43,8.06,4.23,2.76,3.72,6.27,6.41,11.27,6.45,2.36,0,3.91,1.61,5.3,3.36,4,5.09,8.11,10.15,12.16,15.23,1.57,2,3.17,4.35,5.62,4.77,11.29,1.92,21.32,9.57,33.5,7.46a9.25,9.25,0,0,1,2.49.07c14.32,1.5,14.7,3.11,15.83,14.44.12,1.16.31,2.31.52,3.46,1.73,9.37,3.1,10.3-7.94,9-9.82-1.17-17.17,3-25.06,7.65C890.76,446.15,875,447,859.14,439c-4.75-2.41-9.41-5-14.06-7.61s-8.88-2.29-13.23.44c-2.26,1.41-5,2.26-6.86,4.06-6.23,6-13.79,7.23-21.77,6.15-11.89-1.6-21.26,2.1-29.26,11.07-5.06,5.68-11.35,10.26-17,15.45a7,7,0,0,1-5.91,1.77c-12.44-1-24.29-3.78-35.18-10.16-4.45-2.61-9.12-4.83-13.69-7.23-4.13-2.17-6.86-1.22-7.58,3.5s-3,5.82-7.35,5.58c-7.43-.4-14.1,1.79-19.29,7.46-3,3.32-6.82,4.43-11.25,4.31-7-.19-14,.22-21-.21a16.41,16.41,0,0,0-14.47,6.25C619.23,482.22,617.06,484.51,615,486.85Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Penalolen"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Penalolen")}
          className={
            selectedComunas.includes("Penalolen") ? "selected" : "lightblue"
          }
        />
        <path
          d="M-54.27,649.12c10.77,5.33,22.07,9.35,33.44,13.16,4.23,1.42,5.51,3.15,3.6,7.61-7.62,17.79-12.81,36.45-19,54.73-.81,2.36-1.65,4.72-2.62,7-2.37,5.58-4,6.25-9.6,4.15-4.89-1.83-6.55-.9-6.38,4.39.39,12.54-1.37,24.93-2.22,37.38-.89,13.06-8,23.83-14,34.93-1.11,2.06-2.5,3.93-2.78,6.3-.23,2,.4,3.9,2.34,4.54,12.23,4,23,11.3,35,15.79,19.21,7.17,38,15.47,56.48,24.21,8.94,4.22,18.63,4.85,28.08,6.72,5.88,1.16,11.73,2.46,17.63,3.5,3.62.64,4.37,2.4,3.87,6-2.8,20-7.78,39.53-12,59.24-1.49,7-2.3,14.3-4.89,20.89-9.85,25.09-13.61,52.05-24.08,76.93a60.23,60.23,0,0,0-3.08,11.05c-1.66,7.95-.46,15.17,5.58,21.22,5,5,8,11.38,10.61,17.93,1.17,2.94.75,4.41-2.55,4.64a6.73,6.73,0,0,0-1.44.4c-6.23,1.9-7,3.38-4.15,9.25,5.65,11.53,12.86,22.16,19.38,33.19,3,5.93,6.08,11.84,9,17.8,4.93,9.91,5,20.56,4.63,31.27-.1,2.65-1,4.59-4.25,4-3-.56-7.09,1.27-7.55-4.11-.4-4.64-1.46-9.25-1.6-13.89-.12-4.14-2.16-5.89-5.8-5.83-4.39.07-7.21-1.49-8.65-5.79-1.08-3.23-3.78-3.94-6.92-3.35-20.19,3.81-40.72,4-61.12,5.64-3.35.27-6.12-.57-8.31-3.46-4.52-6-8.18-7.39-11.88-5.08-4.18,2.62-5.9,10.76-3.19,15.9,3,5.71,8,9.34,13.64,12,9.17,4.36,18.69,7.74,29.94,8.73-6.24,5.62-13.09,7.33-19.68,9.21-11.69,3.34-23.95,4.19-35.67,7.51-1.87.53-3.57-.14-5.29-.92-13-5.9-24.26-14.52-35.65-22.92a4.33,4.33,0,0,1-1.5-5.73,21.56,21.56,0,0,1,2.08-4.53c7.91-10.49,7.92-22.3,5.8-34.4-2.82-16.06-4.78-32.3-9.46-48-1.59-5.34-3.78-10-9.7-11.69a4.92,4.92,0,0,1-3.15-3c-3.39-8.14-7.23-16.12-9.51-24.69a25.7,25.7,0,0,1,1.68-17.52c2.53-5.76.46-8.68-5.81-8.48-9,.28-18,.57-26.94.6-4.52,0-5.53-1.56-5.16-5.51,1-11.07,5.72-20.85,11.14-30.22a137.56,137.56,0,0,0,8.81-18.43c1.82-4.59.84-9.18-.87-13.64s-5.54-4.9-9.37-5.46c-8.46-1.23-8.71-1.17-9.82-9.38-.9-6.68-3.58-12.13-9.12-15.93-4.83-3.31-5.08-7.14-2.33-11.93a62.18,62.18,0,0,0,4.59-10.51c1.43-4.09.36-7.12-2.81-9.71-.52-.42-1-.88-1.52-1.3-3.21-2.54-7.88-4-8.44-8.67-.77-6.42-1.24-13,1.91-19.11,1.3-2.51,2.54-5.07,4.06-7.45,2.16-3.4,3.25-6.82,2-10.88-1.42-4.65.81-8.56,4.17-11,10.7-7.84,13.62-18.42,14.1-31.16.62-16.45,3.08-32.89,2.44-49.36-.41-10.4,3-18.85,8.92-26.78,4.26-5.75,8.94-11.2,12.48-17.47,1.36-2.41,3.22-3.15,5.83-1.73,2.16,1.18,4.69,1.34,6.77,3,7.15,5.73,8.22,5.36,11.67-3.29,5.75-14.44,9.35-29.54,13.06-44.57a186.39,186.39,0,0,1,7.22-22.83c1.37-3.53,3-4.55,6.71-3C-75.17,641.33-64.69,645.15-54.27,649.12Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="San Bernardo"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("San Bernardo")}
          className={
            selectedComunas.includes("San Bernardo") ? "selected" : "orange"
          }
        />
        <path
          d="M-234.93,184.63c-1.57,17.46,2.08,34.69,2.29,52.06.06,4.68-.39,9.2,3.8,12.7,1.38,1.15.84,3.47.87,5.29.27,19.72,1.17,20.85,20.35,25.3.65.15,1.31.25,2,.41,9.45,2.44,10.51,4,10.69,13.52.21,11.31-.61,22.63.86,33.93.8,6.2-4.4,13.32-10.24,15.36a20.34,20.34,0,0,0-2.72,1.23c-2.2,1.15-4,3.79-6.44,3.5-2.65-.32-1.73-3.93-3.19-5.71-2.37-2.89-5.78-4-9-5A329.51,329.51,0,0,0-293,322.91a84.65,84.65,0,0,1-16.16-3.17c-4.39-1.34-6.88-4.17-6.73-8.73.27-8.11-3.37-14.78-7.27-21.43-2.05-3.51-5.43-4.58-8.95-4.4-10.43.53-21,.11-31.2,2.95-4.3,1.19-6.29,3.79-5.54,8,1.22,7,.22,13-6.4,16.89-7.25,4.27-14.53,4.1-20.93-1.33-7.94-6.73-17.4-7.82-27.08-8.63-4.64-.39-9.28-.86-13.93-1-5.75-.18-8,2.27-7.52,7.86.37,4.72-1.88,6.81-6.43,5.91-8.49-1.67-16.91-3.83-25.46-4.93s-13.83-7.2-19.59-12.14c-7.18-6.15-14.16-3.93-21.48-1.77-2.07.61-3.08,2.5-3.19,4.67-.17,3.32-.41,6.64.73,9.89a18.05,18.05,0,0,1,1.08,4.84c.78,13.26-7.77,19.14-20.24,14.76-12.16-4.27-15.32-13.89-16.39-25a92.65,92.65,0,0,1-.07-15c.51-7.59,4.4-13.46,10.21-18.19,1.68-1.36,3.31-2.8,4.89-4.27,5.15-4.78,4.71-6.89-2.19-8.72-3-.78-3.59-2.85-3.83-5.14a107,107,0,0,0-2-11.29,15.51,15.51,0,0,1,3.75-14.41c6.09-6.64,7-14.43,5-22.86-1.64-7-.29-10.77,6.19-13.88,6.24-3,8.71-7.59,7.54-14.09-.87-4.81,1.48-7.4,5.38-8.83,12.16-4.47,24.05-9.82,36.92-12.11,3.37-.6,5.51-2.24,5.8-5.79.24-3,1.27-3.14,3.82-1.73,5.36,3,8.28,2.21,12.24-2.33,6-6.88,7.57-15,6.7-23.78-.21-2.15-.61-4.29-.67-6.45-.22-7.73-.19-7.78,7.35-9.61,4.5-1.1,4.07-4.55,3.28-7.56-2-7.61-2.71-15.41-3.88-23.13C-452.67,54.36-455,31.54-455,8.52c0-21-1.43-41.91-1.89-62.87-.19-8.63.65-17.29.84-25.93.07-3.41,1.57-5.25,4.86-4.63,12.7,2.39,25.16-1.82,37.8-1.16,7.2.38,8.63-1.25,9.26-8.57.74-8.68-.55-17.3-1.22-25.91-.32-4.16-.67-8.29-.58-12.45,0-1.73-.83-4.17,1.26-4.92,1.8-.64,3.24,1.32,4.65,2.44a168.58,168.58,0,0,1,21.27,20.33q13.79,15.47,28.3,30.27c7.08,7.26,13.7,15,20.55,22.46s14.83,13.37,23.32,18.7c3.38,2.12,4.13,3.9,1.06,7.23-10,10.89-19.5,22.3-29.66,33.07-17.81,18.88-36,37.45-54,56.12-4.59,4.75-7.14,10.07-6.94,17,.37,13,0,25.93.11,38.89,0,7.71.8,8.64,8.16,10.49a4.31,4.31,0,0,1,3.29,2.71c1.48,3.76,3.91,6.94,6.2,10.23A63.65,63.65,0,0,0-347,156.28c5,1.79,10.51,3.93,15.48-.74,1.41-1.33,2.51,0,3.35.92,3.51,4,8.25,5.31,13.15,6.63,11.05,3,22.47,2.43,33.67,3.88,1.32.17,2.92,0,3.9.63,10,6.84,21.37,5.22,32.45,5.4,1.83,0,3.67.11,5.5,0,3.28-.15,5.06.91,4.59,4.62A56.25,56.25,0,0,0-234.93,184.63Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Pudahuel"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Pudahuel")}
          className={
            selectedComunas.includes("Pudahuel") ? "selected" : "green"
          }
        />
        <path
          d="M-63.49-53.33c-6.72-4.63-10.87-4.65-14.8.44a13.26,13.26,0,0,1-11.14,5.55c-8.73-.15-13.08,5.48-17.24,11.68-1.58,2.35-3,4.83-4.67,7.09-5.16,6.95-11.09,12.46-20.8,10.6-8.51-1.63-14.43,2.53-19.06,9a9.61,9.61,0,0,1-7.44,4.25c-6.79.72-13.47,1.94-19.8-2.29a5.71,5.71,0,0,0-8.1,1.28c-2.13,2.69-4.23,2.1-7,.88-4.88-2.14-9.64-4.11-14.31,1.58-2.21,2.7-6.28,1.85-9.36-.92-4.67-4.2-8.77-9.14-15-11.4-4-1.45-7.78-1.9-11.5.44-5.11,3.22-10.35,2.46-15.26,0-3.82-1.94-7.23-4.72-10.74-7.24A5.94,5.94,0,0,1-272-27.7c.15-4-1.91-6.25-5.54-7.25-24.15-6.65-40.86-23.49-56.76-41.44-2.43-2.74-4.68-5.67-7.33-8.17-2.18-2.05-2.06-3.32-.33-5.8,7.27-10.4,17.47-17.81,26.55-26.3,4.37-4.09,6.32-8.41,6.33-13.91a157,157,0,0,1,1-17.93c.51-4.31,1.76-6.85,6.91-6,4.25.73,7.36-1.24,8.7-5.65,2.9-9.51,7.92-18.36,8.57-28.56a4.77,4.77,0,0,1,4.44-4.68c8.21-1,16.37-2.53,24.69-2.65,2.12,0,4.78.32,5.27-2.54.52-3.07-2.33-2.95-4.24-3.81-3.24-1.46-6.34-3.24-9.5-4.88l.42-1.22c6,.78,12,1.5,17.92,2.36,1.92.28,2.8,1.69,2.8,3.58,0,9.71,6.33,14.49,14.17,18a52.6,52.6,0,0,0,7.57,2.56c4.2,1.14,6.94-.66,7.21-5a62.5,62.5,0,0,0-.44-14.45c-.57-3.28-1.43-7.14,3.76-7.43,8.76-.49,9.63-.05,9.93,5.66.5,9.49,3.67,12.12,13.28,12.24,7.2.09,14.23-1.47,21.32-2.33,3.29-.4,4.67-2.84,5.28-5.86.45-2.18.78-4.17,4.14-3.23,2.41.68,2.87-1.35,1.87-3.11a40.45,40.45,0,0,0-3.88-5.18c-18.63-23.23-37-46.68-54.8-70.54-4.62-6.18-4.54-6.87,2.42-9,18.75-5.79,37.43-11.87,56.33-17.12,11.52-3.2,11.66-2.6,13.89-14.1,1-5.07,2.18-10.09,2.1-15.31-.05-3.4,1.72-4.68,5.18-5.3,10.37-1.87,19.59.48,28.73,5.44,8.54,4.63,17.49,6.59,27.3,2.42,5.15-2.19,11,0,14.7,4,6.85,7.28,14.52,12.48,24.55,14,1.64.25,4.12.6,4.18,2.84.06,1.94-2.37,2-3.71,2.88-3.4,2.2-4.08,5.23-1.49,8.4,3.35,4.11,7.31,7.12,13.08,7.22,6.45.11,7.34,1.26,7.38,7.84,0,6.33,0,12.66,0,19a21.85,21.85,0,0,0,2.34,10.62c3.1,5.69,2,9-4,11.67a3.72,3.72,0,0,1-.93.36c-12.07,1.84-16.33,10.84-19.15,21.06-.82,3-1.5,6-4.58,7.34-7.32,3.07-8.58,9.61-9.62,16.27-.26,1.65,0,3.22-1.69,4.38-2.12,1.49-2.42,3.86-2.46,6.26a64.54,64.54,0,0,0,2.09,16.3q4.61,18.92,9.58,37.75c.74,2.77.41,3.48-2.59,3.28a203.41,203.41,0,0,0-30.92.84c-5.22.45-7,2.54-5.66,7.59q5,18.28,10.56,36.39C-71.43-76.7-67.55-65.57-63.49-53.33Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Quilicura"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Quilicura")}
          className={
            selectedComunas.includes("Quilicura") ? "selected" : "green"
          }
        />
        <path
          d="M262.48,61.26c1.79-11.64,3.92-22.91,3-34.06C264.32,13.86,269,4.35,279.26-3.61c6.49-5,13.59-10.19,14.35-19.52.55-6.65.69-13.24-4.68-18.61-3.28-3.27-1.46-12.92,2.53-15.08,3-1.62,7.24-1.59,8.55-5.41A31,31,0,0,0,301.45-78c-.7-3.79-1.17-6.83,3.58-8.26,2.34-.7,2.68-3.26,2.8-5.46.39-7.32,1-14.6,1.86-21.89,1-8.5-2.29-15.43-9.33-20.25-4-2.75-3.68-5.06-.69-8.36,7.51-8.29,16.67-14.78,24.36-22.91,4.06-4.29,10.4-4,16-4.76,3.62-.51,7.26-.91,10.88-1.38,8.11-1.06,13.41-5.82,16.06-13.22,1.33-3.72,2.46-3.27,5.12-1.46,6.12,4.15,10.75,10,16.54,14.45,1.45,1.12,1.07,2.57.78,4.1-.76,4,1.35,5.51,5,5.56a11.92,11.92,0,0,0,8.7-3c4.5-4.08,6.69-4.24,10.63-.1,6,6.27,13.4,8.75,21.62,8.7,14.21-.09,25.42,5.71,35.69,15.23C483-130,495.87-119.87,508.32-109.33c8.57,7.26,18.49,7.93,29.16,6.89,19.71-1.93,39.47-3.49,59.31-3.51,1,0,2,0,3,.13,2.48.23,3.05,2.18,3.74,4.11.82,2.3-.89,2.91-2.29,3.75-6.56,3.95-13,8.08-19.48,12.18-11.34,7.19-20.2,16.77-28.12,27.35a37.83,37.83,0,0,1-15,11.94Q448.19-5.18,355.47,30.64c-18.67,7.17-37.13,14.81-54.82,24.12C288.36,61.23,275.23,60.05,262.48,61.26Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Vitacura"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Vitacura")}
          className={
            selectedComunas.includes("Vitacura") ? "selected" : "lightblue"
          }
        />
        <path
          d="M123.64,376.84c-9.08-.53-16.68-.95-24.4-2.78-9.94-2.35-20.43-2.32-30.68-3.38-6.46-.67-12.79-1.15-19.35.17-4.23.85-6.52,2.45-6.5,6.54s-2.1,5.75-5.91,6.44c-10.09,1.83-20.28.87-30.41,1.38-2.56.13-3.08-1.57-2.83-3.63S2.89,377,6.45,377c6.31,0,12.58-1.08,18.94,0,6.55,1.1,8.09-.38,8.26-6.88.11-4.33.26-8.66.39-13s-2.07-6.47-6.31-6.64c-4.83-.19-9.66-.58-14.48-.47-3,.07-4.26-.75-4-3.9,2.48-25-.69-50.3,2.67-75.33.64-4.76-.8-9-5.33-11.47-2-1.06-2.42-2.37-2.24-4.43.55-6.3.85-12.63,1.42-18.93C6.31,230.5,5,228.07-.41,228c-11.78-.19-23.55-1.82-35.34-.26-6.53.86-6.7.6-5.69-5.68,1.93-11.92,1.91-12.07,14.12-13.34,7.44-.78,15-.79,22.4-1.57,7.15-.75,8.21-2.4,7.29-9.46-1.17-8.91,1.08-17.56,1.85-26.33.4-4.47.77-9,.75-13.45,0-3.08,1-4,4.07-4a12.69,12.69,0,0,1,7.39,2.53c8.5,6,11.75,5.52,17.74-2.75,1-1.43,2-.7,3.05-.56,16.75,2.18,32.83,7.2,49,11.81a277.06,277.06,0,0,1,38.49,13.63c10.43,4.72,22.44,4.42,33.64,7,5.57,1.28,7.73,3.4,8.07,9,1.28,21.14,10.52,40.12,16.61,60,6.93,22.58,15.11,44.77,21.18,67.62,1.8,6.76,3.84,13.46,5.87,20.15.59,2,.83,3.53-1.49,4.47-15.35,6.2-29.1,15.45-43.77,23C151.35,376.6,136.67,375.69,123.64,376.84Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Santiago"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Santiago")}
          className={
            selectedComunas.includes("Santiago") ? "selected" : "green"
          }
        />
        <path
          d="M25.24,143.62c-5.3-2.74-10.5-5.67-15.9-8.19A261.87,261.87,0,0,1-32.9,110.86c-13.91-10-28.08-19.69-41.22-30.74a16,16,0,0,1-3.27-3.74c-4-6.42-9.51-10-17.2-10.16C-105.71,66-116.8,64-128,66c-3,.56-6,1.39-8.25,3.31-5.21,4.54-10.89,5-17.29,3.56-6-1.32-7.51-.29-8.2,5.85-.4,3.57-1.84,5.15-5.17,6.21-5,1.6-10.31,2.85-14.57,6.35-1.63,1.34-3.27,1.28-5,.07-4.65-3.18-10-3.85-15.32-3.1a125.68,125.68,0,0,1-14.45.78c-23.48.57-46.95,1.35-70.44,1-9.32-.15-18.59-1.52-27.94-1.07-3.95.19-7.54.87-10.67,3.5s-7,3.68-11,4.48A30.89,30.89,0,0,0-343,98.66c-3.43,1.57-6.43,2.4-9.38-.94a5.34,5.34,0,0,0-3.67-1.35c-8.3.06-16.5-2.16-24.88-.76-8.13,1.36-8.92.45-9.08-7.63-.16-7.48.62-15-.71-22.45-.43-2.39.91-4.1,2.41-5.75,13-14.32,26.53-28.07,39.94-42,16.4-17,32.51-34.28,48.65-51.54,2.07-2.22,3.81-2.82,6.4-1a13.58,13.58,0,0,0,4.57,2c6,1.37,9.73,4.14,11.8,10.84,3.1,10,23.43,18.25,32.9,13.54,7.31-3.64,12.07-.84,16.76,3.69,5.15,5,10.75,8.4,18.19,7.75.66-.06,1.55.18,2-.16,5.17-4.33,10.56-2.83,16.1-1,1.29.44,3.41.37,4.35-.42,4.29-3.62,8.21-1.39,12.76-.51,6.95,1.34,14.25.37,21.31-.55,3.63-.47,5.72-3.84,7.76-6.69,2.71-3.77,5.68-5.7,10.88-5,13.18,1.85,21.08-6.95,28.82-15.61a33.55,33.55,0,0,0,2.56-3.69c4.39-6.49,9.3-11.95,18.13-12,4.17,0,7.51-2.49,10.16-5.72,1.9-2.31,3.27-2,6.42-1,9.18,2.85,10,11,13.48,17.6,9,16.88,14.8,35.5,26.92,50.58,6.8,8.46,11.43,18.41,19,26.28,2.16,2.25,2.15,5.58,2.35,8.53.82,11.95,1.6,23.9,2.09,35.86.6,14.46,5.71,26.75,16.11,37C17.1,131.59,23,135.9,25.24,143.62Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Renca"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Renca")}
          className={selectedComunas.includes("Renca") ? "selected" : "green"}
        />
        <path
          d="M370.63,168.37c7.69-.36,14.8-.75,21.92-1,28.79-1.09,57.53-3,86.28-4.83,17.13-1.11,33.74-5.62,50.87-6.35,7.3-.31,7.28-.75,7.19,6.53-.15,11.58.47,12,12.06,11.08,10.66-.86,20.83-4.09,31.25-6,9.8-1.83,18.92-.53,27.51,5.58,10,7.1,22.06,9.17,33.87,11.3a31.78,31.78,0,0,1,14.85,6.62c12,9.77,24.64,18.75,36,29.35a8.57,8.57,0,0,1,3.11,7.77c-.79,10.19,1.24,19.17,10,26.19a118.63,118.63,0,0,1,23.06,24.14c3,4.27,4,9.07,4.9,14,.58,3.24-1.83,2.58-3.48,2.5-7.15-.38-14.3-.85-21.44-1.36-28.55-2-57.09-4.43-85.73-5-14.32-.27-28.63-.83-43-1-7.13-.09-10.17,2.7-11.7,9.68-.82,3.74-1.75,7.45-2.42,11.22-.52,2.9-1.89,3.75-4.48,2.36-15.36-8.22-31.94-6.49-48.36-5.9-19.35.69-38.51-1.77-57.74-3.16-9.75-.7-18.62-4.73-27.28-9.09-1.93-1-3.86-2.3-5.92-2.57-4.53-.61-6-2.83-5-7.14,3.23-15.07-1.22-29.76-2.4-44.6C413.74,228,412,217.51,410.15,207c-1.76-9.82-6.82-17.21-15.42-22.14-6.21-3.55-12.58-6.82-18.74-10.45A10.94,10.94,0,0,1,370.63,168.37Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="La Reina"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("La Reina")}
          className={
            selectedComunas.includes("La Reina") ? "selected" : "lightblue"
          }
        />
        <path
          d="M338.13,360.23c-32.9-3-65.53,1.15-98.24,3.54-5.28.39-10.63-.38-16-.55-2.89-.09-3.34-2.39-4.07-4.37-6-16.3-10.21-33.1-14.57-49.86-4-15.34-9.89-30.05-14-45.33-2.12-7.88-1.62-9.06,6.28-11.39,10.7-3.14,21.48-6,32.21-9.06,2.38-.68,4.21.37,6.05,1.55a13.65,13.65,0,0,0,13.81.9c5.31-2.43,10.78-4.83,15.05-8.77s9.49-5.29,15-5.65c10.3-.66,20.61.79,30.94-.12,5.6-.49,9.28,4.08,13.69,6.61,5.86,3.36,5.62,3.17,9.82-2.19,13.07-16.71,23.18-35.33,34.67-53.05,2.07-3.19,3.54-3.76,6.95-1.52,4.84,3.19,10.29,5.46,15.42,8.21,8,4.28,12.72,10.66,14.09,19.9,2.55,17.31,3.94,34.74,6,52.1,1.91,15.65-1.08,30.38-8,44.48a114.8,114.8,0,0,0-9.82,28.75,7.39,7.39,0,0,1-3.59,5.49c-8.05,5-15.93,10.31-23.78,15.63s-16.41,4.8-25.09,4.69C340.13,360.22,339.13,360.23,338.13,360.23Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Nunoa"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Nunoa")}
          className={
            selectedComunas.includes("Nunoa") ? "selected" : "lightblue"
          }
        />
        <path
          d="M260.45-71c2.67,0,5.33,0,8,0s4.59.72,4.46,3.93c-.12,3-1.91,4.09-4.6,4-3.49-.1-7-.32-10.46-.51a33.81,33.81,0,0,0-5-.33c-3.55.34-4.92,3-2.48,5.44,4.6,4.59,9.8,8.48,16.72,8.9.16,0,.33-.06.5-.05,2.79.05,18.3,12.09,19,15.05,1.93,7.71,1.5,15.94-5.53,21.25C274.89-8.57,269.85-2.5,264.39,3.08c-2.8,2.86-3.06,6.52-3.36,10.19-.28,3.31-.62,6.62-.89,9.94-.26,3.15-1.76,3.43-3.79,1.46C250.34,18.85,242.69,15,236.9,9,228.47.36,218.28-6,209-13.59,195.2-24.9,181.36-36.15,165.25-44c-13.31-6.51-26.91-12.41-40.45-18.44-9.29-4.13-18.17-9.07-27.29-13.48Q82-83.43,66.46-90.72c-21.44-10-42.94-19.8-64.37-29.77-12-5.59-24.42-9.78-37.59-11.47-2.59-.33-4.47-1.22-5.11-3.9q-5.5-22.81-11-45.62c-.23-1-.23-2-.43-3-.69-3.42-.28-5.65,4.1-6s6.82-3.53,8-7.79c1.81-6.41,2.34-6.63,8.7-5.36,5.33,1.06,12.32-2.79,14.28-8.55,1.6-4.72,2.92-8.48,9.33-7.26,2.85.54,5.62-1.89,7.65-4.19,3.07-3.49,6.39-6.85,8.25-11.2,1-2.39,2.27-2.84,4.63-1.84,6.29,2.64,11.72,1.79,15.6-4.38.59-.93,1.6-1.71,2.47-1,4.49,3.87,12.52,4.37,12.18,12.92-.1,2.63,1.71,4.66,3.6,6.35,3.69,3.3,4.45,7.28,2.89,11.8s-2.29,9.35-3.94,13.93c-2.72,7.52-.12,11.77,7.63,13.49a27,27,0,0,0,3.46.44c8.92.79,9,.75,11.42,9.26,1.13,4,3.53,5.77,7.57,5.77,3.5,0,7,.05,10.49.27,3.14.2,4.41,1.92,4.76,5.2.88,8.5-2.69,16-4.84,23.8-1.66,6-.18,8.43,6.22,8.26,2.94-.08,3.15.78,2.2,3.13a41.45,41.45,0,0,0-2.18,6.62c-1.16,5.36.28,7.92,5.37,10.27,2.12,1,4.21,2,6.3,3,8,4,11.67,3.29,16.37-4.22,2.64-4.22,5.94-5.47,10.44-4.9,3.95.5,6.67-1.41,7.72-4.88,2-6.5,5.87-11.95,9.17-17.68a21.19,21.19,0,0,1,26-9c5.68,2.2,7.41,7.31,8.06,12.8.6,5-.33,10-1.25,14.89-1.32,6.94,0,14-1.32,20.92-.4,2,1,3.46,2.8,4.26,11.43,5,22.39,11.08,34.23,15.15,4.61,1.58,8.09.39,8.92-4.16,1.37-7.5,8-7.49,12.83-9.44,3-1.2,6.37-1.21,8.82-3.9,1.2-1.32,10.94-.11,11.66,1.3s-.53,2.45-1.35,3.44c-3,3.6-7.21,5.88-9.84,9.88-1.84,2.81-3.3,5.67-1.88,8.84S250.15-71.21,253-71c2.49.14,5,0,7.5,0Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Huechuraba"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Huechuraba")}
          className={
            selectedComunas.includes("Huechuraba") ? "selected" : "green"
          }
        />
        <path
          d="M-19.15,380.06-20.06,393c-7.78,24.14-20.79,46.21-28.28,70.43C-59.27,498.82-74.63,532.49-87.84,567c-4.55,11.87-7.85,24-5.52,37.06,1.1,6.19.46,12.63-.06,19-.24,2.93-1.3,3.71-4.18,2.33-20.7-10-41.15-20.5-62.8-28.33-4-1.44-3.52-3.53-1.83-6.42q8.56-14.65,17-29.39c6.44-11.35,4.77-19.71-5.31-28.1-3.08-2.56-6.76-2.64-10.38-2.92-16.45-1.24-32.95-1.28-49.44-1.45-5.55-.06-6.06-.34-4.38-5.6,4.26-13.32,8.65-26.59,13.3-39.78a32.7,32.7,0,0,1,9.38-14c2.23-1.93,2.94-4.34,3.17-7.06,1.24-15,.8-30,1-44.94.11-9.87.15-9.88,9.71-7.9a21.76,21.76,0,0,0,9.9-.26c4-1,6.56-3.25,7.66-7.57a100.32,100.32,0,0,0,3.56-25.15c0-3.68,1.17-4.53,4.35-2.25,7.34,5.27,14.31,11,20.08,17.91,3.53,4.25,7.91,7.6,11.43,11.83,2,2.4,4.54,1.15,7,.68,22.46-4.34,44-11.84,65.91-18.24C-38.81,383.67-29.14,381-19.15,380.06Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="Cerrillos"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Cerrillos")}
          className={
            selectedComunas.includes("Cerrillos") ? "selected" : "orange"
          }
        />
        <path
          d="M162.06,165.16c-.29,4.42.68,8.5,1.42,12.59.58,3.18-.67,4.17-3.45,3.3-15.47-4.84-32.39-4.21-47-12.65-3.69-2.13-5-4-4.54-8.51,1.33-14.3,4.75-28.21,7-42.32a48.2,48.2,0,0,0,.48-7c.09-7.32-.13-7.62-7.53-8.67-3-.43-4.54-1.87-4.43-4.91.47-13,.79-25.94,1.52-38.89.33-5.89-.59-7.51-6.49-8.07-9.08-.87-10.81-3.6-12.31-12.4-4-23.3,2-46.44.28-69.66-.84-11.26-1-22.58-3.67-33.64-.56-2.28-1-4.81.7-6.71,1.94-2.21,4.05,0,6,.48,5.08,1.32,9.09,4.81,13.63,7.23,16.93,9,35.11,15.28,52.4,23.53,13.6,6.49,26.67,13.87,37.8,24,9.68,8.78,21,15.29,30.67,24,10,9,20.82,17.11,31.27,25.61,2.74,2.23,4.42,4.63,3.42,8.59A59.23,59.23,0,0,0,258,51.9a7.92,7.92,0,0,1-4.22,6.9c-6,3.37-11,8.07-16.55,12-3.24,2.32-6,5.3-6.79,9-2.22,10.7-10.6,16.54-17.58,23.51-2,2-4.23,3.75-6.33,5.65-1.43,1.29-3,2.37-5,1.5-4.76-2.15-8.48.06-11.9,2.83-5.59,4.52-10,10.22-14.48,15.77-2.66,3.3-3.4,7.55-3.17,11.85a14.35,14.35,0,0,1-5.09,12C162.83,156.41,161.69,160.47,162.06,165.16Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Recoleta"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Recoleta")}
          className={
            selectedComunas.includes("Recoleta") ? "selected" : "green"
          }
        />
        <path
          d="M167.79,165a7.51,7.51,0,0,1,2.51-6.67c5.14-4.92,8.12-10.83,7.89-18.21-.14-4.38,1.85-8,5-11.08,2.62-2.56,5.18-5.19,7.75-7.8,3-3.1,5.76-6.34,11-3.57,2.4,1.26,5.27-.44,7.3-2.26,8.33-7.43,16.46-15.07,23.55-23.73a11.58,11.58,0,0,0,2.23-5,25.56,25.56,0,0,1,25-19.74c5.66,0,11.34-.1,17-.56,3.59-.29,3.57.77,2.35,3.56-3.05,7-6.46,13.88-8.64,21.27-1.54,5.23-.7,9.13,4.6,11.5,1.82.81,3.41,2.27,5.28,2.8,18.9,5.38,33.7,17,47.17,30.68,9.48,9.65,20.44,17.6,30.88,26.13,3.93,3.21,5.14,8.09,8.55,11.52,1.19,1.2-.13,2.49-.9,3.52-12.9,17.19-23.72,35.79-36.12,53.32-1.25,1.77-2.1,4.05-4.77,1.46-7.21-7-16.07-7.25-25.26-5.89-8.29,1.23-16.63.92-24.94.59a15.43,15.43,0,0,0-11.12,3.58,70.2,70.2,0,0,1-9.95,6.62c-6.22,3.75-12.21,6-18.83.67-2.18-1.77-5.13-1.06-7.71-.14-11.93,4.27-24.57,6.13-36.37,10.81-2.29.91-3.54.54-4.58-2C175.78,220.33,171,192.84,167.79,165Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Providencia"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Providencia")}
          className={
            selectedComunas.includes("Providencia") ? "selected" : "lightblue"
          }
        />
        <path
          d="M27.68,363.4c0,6.83,0,6.94-6.75,6.92-28.29-.08-55.5,5.72-82.31,14.35a460.89,460.89,0,0,1-52.18,13.64c-3.47.68-6.08.31-8.46-2.45-10.37-12-21.81-23.11-35.37-31.3-10.45-6.31-21.21-12.45-32.92-16.48-6.21-2.14-6.42-2.38-2.5-7.24s5.11-10.15,4.71-16.28c-.73-11.13-.47-22.32-1.76-33.42-.44-3.83.39-6,4.83-4.06,16.83,7.32,34.95,9.57,52.73,13a69.38,69.38,0,0,0,30.23-.58c5.06-1.28,7.49-4,7.76-8.92a150.6,150.6,0,0,0-1.27-25.87c-1.41-11.95-1.54-12.32,10.3-11.82,12,.51,23.88-2,35.87-2.3,3.3-.07,5.23-1.85,5.63-5.2.1-.82.36-1.63.47-2.45,1.33-10,1.32-10.07,11.59-10.14,9-.07,18,.11,27,.06,3.43,0,4.71,1.14,4.22,4.79-.82,6.1-1.06,12.28-1.66,18.41-.38,3.93.68,6.92,4.7,8.28,3.1,1.05,3.93,3.44,3.54,6.34-3.4,25.18-.52,50.62-3.09,75.83a37.79,37.79,0,0,0-.13,6c.17,2.88,1.76,4.39,4.66,3.55,5.84-1.7,11.58.21,17.32.48C29.45,356.72,26.91,361.22,27.68,363.4Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Estacion Central"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Estacion Central")}
          className={
            selectedComunas.includes("Estacion Central") ? "selected" : "green"
          }
        />
        <path
          d="M385.06,350.18l4.85-2.2c1.19.47,1,1.44.81,2.15-4.15,18.26-5.23,36.92-7.1,55.47-2,19.39-10.73,35.88-21,51.8-7.9,12.29-15,24.82-16.41,39.77a64.91,64.91,0,0,0,.38,16.44c.75,4.72-1.14,5.73-5.48,5.28-19.23-2-38.5-3.43-57.86-2.73-6.33.23-12.65-.18-18.94-.07-4.65.08-6.06-1.92-7-5.77a445.28,445.28,0,0,1-9.86-54c-3.23-27.6-9-54.54-20.64-80-.14-.3-.25-.62-.36-.93-2.4-6.6-2.4-6.54,4.47-6.18,11.53.6,23-1.05,34.39-2.09,28.13-2.56,56.26-1.37,84.4-1.11,8.23.07,15.81-2.08,22.3-7.39a13.29,13.29,0,0,0,1.34-1.46Z"
          transform="translate(585.09 634.09)"
          fill="lightblue"
          name="Macul"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Macul")}
          className={
            selectedComunas.includes("Macul") ? "selected" : "lightblue"
          }
        />
        <path
          d="M-57.38-126.64c24.26-2.07,44.57,5.52,64.5,14.92C26.7-102.5,46.44-93.62,66.06-84.49c3.46,1.61,6.69,3.71,10.05,5.52,1.49.81,2.38,2,2,3.63-2.42,10.27,1.1,20.15,2.39,30.07,2.45,18.87,1.31,37.53-1,56.21C78.29,20.28,78,20.65,68.6,21.47c-11.92,1-23.93.54-35.83,2.44-12.8,2-25,5.6-36.13,12.36-2,1.21-4.16,2.44-5.49-.33C-14.17,24.84-24.12,17-29.62,6.07-42.42-19.35-55-44.83-63.13-72.3c-4.56-15.48-9.77-30.77-14.44-46.22-2.1-7-1.86-7.34,5.38-8C-66.75-127.05-61.22-126.64-57.38-126.64Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Conchali"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Conchali")}
          className={
            selectedComunas.includes("Conchali") ? "selected" : "green"
          }
        />
        <path
          d="M-82.12,247c-13.36,0-13.58,0-15.17-12.28A173.09,173.09,0,0,1-99,205.38c.2-4.75-1.67-6.83-6.43-6.42a32.93,32.93,0,0,1-16.09-2.58c-5.23-2.25-10.85-1.2-16.32-1.37-2.16-.07-4.33,0-6.5,0-9.43-.23-9.45-.74-8.29-10.08,2-16.38,5.52-32.48,8.84-48.6,2.18-10.59,5.13-21,6.24-31.81.88-8.57-1.8-14-9.65-17.77a70.63,70.63,0,0,1-7-3.79,2.64,2.64,0,0,1-1.26-3.44c.64-1.37,2-1,3.09-.83,7.34,1,14.29.57,20.13-4.82a7.43,7.43,0,0,1,5.11-1.77c11.64.08,23.31-.89,34.93.81,3,.44,5.66,1.41,7.29,3.85,6.76,10.14,17,16.23,26.53,23.19C-42,112-25.7,124.11-7.51,133.37c10.39,5.29,20.78,10.58,31.11,16,1.55.81,4.71,1.21,3.48,3.8s-4.13,1.49-5.66.14c-4.57-4.05-9.84-4.9-15.68-5-3.63,0-5.79,1.2-5.58,4.61.86,14.58-3.57,28.76-3.09,43.28.14,4.39-1.58,5.76-5.83,5.86-9.78.22-19.56.46-29.28,2-6.08.94-7.73,2.46-8,8.64-.36,9.33-3.2,18.36-3.28,27.74,0,2.52-1.29,4.47-4.28,4.54C-63.4,245.2-73.07,247.53-82.12,247Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Quinta Normal"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Quinta Normal")}
          className={
            selectedComunas.includes("Quinta Normal") ? "selected" : "green"
          }
        />
        <path
          d="M-376.75,102.16c8.25.3,16.69-.64,24.43,3.4a3.44,3.44,0,0,0,2.44.3c9-3.18,19.13-3,27.38-8.57,3.65-2.45,7.52-3.76,11.78-3.19,11.79,1.6,23.63.77,35.44.86,21.13.15,42.26,0,63.39,0a26.61,26.61,0,0,0,5.47-.41c6.87-1.47,13.45-1.87,19.46,2.9,2.55,2,5.41,1.46,7.72-.79,5.6-5.48,12.82-6.92,20.11-7.78,8.72-1,17.08,7.72,16.32,16.18-1.39,15.51-6.77,30.18-9.35,45.44-1.94,11.48-4.11,22.91-6.09,34.38-.87,5.05-3.13,9.78-3,15.11.08,3.2-2,4.29-5.15,2.86-3.94-1.79-8.06-3.21-11.9-5.18-12.17-6.23-25-6.23-38-4.26-.82.12-1.64.35-2.46.41-7.82.58-10.7.52-8.44-8,1.08-4.11-.5-8.41.51-12.82.85-3.73-3.17-4.6-6.21-4.78q-13-.74-25.94-1.09c-5.23-.14-10.08-.88-14.74-3.76-3.83-2.37-8.65-2.07-13.12-2.29a171.92,171.92,0,0,1-24.77-2.9A27.59,27.59,0,0,1-327,149.62c-4.26-4.62-5.21-4.45-8.33.79-1.24,2.08-2.78,2.83-5,2.2-4.31-1.26-8.78-2.2-12.53-4.84-11.54-8.15-21.92-17.3-26.5-31.36-.79-2.42-2.93-2.89-5.13-3.36-4-.84-6.41-7.55-4-10.63.88-1.12,2-.83,3.2-.74C-382.4,101.87-379.57,102-376.75,102.16Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Cerro Navia"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Cerro Navia")}
          className={
            selectedComunas.includes("Cerro Navia") ? "selected" : "green"
          }
        />
        <path
          d="M119.9,556.06a140.08,140.08,0,0,0,19.08,4l-.1,0a15.61,15.61,0,0,1-.3,3.93c-8.81,25.76-13.15,52.61-19.65,78.93-4,16.15-6.61,32.63-11.69,48.53-1.13,3.52-2.75,4.53-6.27,4.76-23.26,1.53-44.66-5.94-66.12-13.21C21.4,678.47,9,671.62-4,666c-5-2-3.72-5.46-2.48-9.37C5.25,619.67,20.28,584,35.33,548.37c1.81-4.28,3.2-8.73,4.78-13.1,8.94,1.06,17.5,3.67,25.94,6.64,16.82,5.92,34.19,9.76,51.45,14a13,13,0,0,0,2.48.13Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="La Cisterna"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("La Cisterna")}
          className={
            selectedComunas.includes("La Cisterna") ? "selected" : "orange"
          }
        />
        <path
          d="M70.13,453.29c6.27-16,12.5-31.91,18.82-47.84,2.45-6.19,5.11-12.29,7.64-18.45,1.43-3.48,3.86-5,7.73-5,12.81-.15,25.65.38,38.42-1.15,3.14-.38,4.58.74,5.6,4,3.22,10.32,3.11,21,4.38,31.58,1.65,13.76,5.57,27.07,7.45,40.75,2.8,20.45,4.73,41,5.59,61.63.4,9.5,1.41,18.92,2.59,28.33.12,1,.36,2,.4,3,.32,8.69-1.18,10.12-9.62,8.55-32.75-6.1-65.32-12.88-96.74-24.28-5.31-1.92-10.89-3.07-16.33-4.63-2.23-.64-4.35-1.5-2.73-4.48,8.15-15.07,10.92-32.12,17.64-47.72,1.9-4.42,3.38-9,5-13.56A32.64,32.64,0,0,0,70.13,453.29Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="San Miguel"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("San Miguel")}
          className={
            selectedComunas.includes("San Miguel") ? "selected" : "pink"
          }
        />
        <path
          d="M215.78,359.05c2.63,14.41,9.7,27.26,14.51,40.9,6.92,19.62,10.26,39.9,12.79,60.4,2.29,18.53,5.5,36.87,11.06,54.76,1.61,5.19,3.37,9.79,7.64,13.57,3.5,3.1,2.32,5.69-2.41,6.54s-9.55,1.46-14.31,2.26a76.89,76.89,0,0,0-36.41,16.61,17.64,17.64,0,0,1-11,4c-5,.18-10,.76-14.95.87-6.36.15-8.87-2.35-9.63-8.79-1.92-16.38-2.74-32.84-4.09-49.26-1.46-17.75-3.32-35.46-6.1-53.07-.46-2.92-2.43-5.54-1.73-8.69a1.51,1.51,0,0,1,1.69-.73c7.1,1.44,7.9.82,8.21-6.43-.3,7.64-1.26,8.22-10,6-4.09-17.42-4.43-35.38-7.64-52.93a32.23,32.23,0,0,1-.16-4.93c17.65-5.89,33-16.38,49.14-25.15C211.8,349.82,211.72,349.67,215.78,359.05Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="San Joaquin"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("San Joaquin")}
          className={
            selectedComunas.includes("San Joaquin") ? "selected" : "pink"
          }
        />
        <path
          d="M-88.67,622.77A113.33,113.33,0,0,0-89,597.92c-.76-6.8.69-13.26,3.19-19.51q14.31-35.68,28.69-71.34c.19-.46.41-.91.6-1.37,4.91-11.4,5.07-11.71,16.24-5.77,19.1,10.16,39,18.84,57.69,29.72,4,2.32,8.1,4.81,12.91,5.08,3.47.2,3.33,1.88,2.27,4.29C25,556.38,19.24,574.53,10.71,591.54c-9.44,18.82-14.92,39.15-21.64,59-.16.47-.28,1-.44,1.43-2.35,7.18-2.26,7-9.52,4.18-14.29-5.48-28.73-10.6-43-16.05-6.37-2.43-12.48-5.54-18.86-7.92C-87.37,630.47-89.77,627.88-88.67,622.77Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="Lo Espejo"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Lo Espejo")}
          className={
            selectedComunas.includes("Lo Espejo") ? "selected" : "orange"
          }
        />
        <path
          d="M-30,432.13c7.09-15.41,14.41-30.79,14.62-48.22.06-5.22,2.86-5.75,7-6.07s5.7,1.21,5.81,5.2c.13,4.35,2.17,7.31,6.93,7.51,12.12.48,24.24,1.32,36.2-1.82,4.15-1.09,7-3.15,7.27-7.65.2-3,1.73-3.92,4.6-3.7,11.43.86,22.87,1.72,34.35,1.66,5.58,0,6.64,2,4.53,7.2C85.72,400.1,80.25,414,74.73,427.93c-10.21,24.39-21.41,48.4-28.41,74a70.56,70.56,0,0,1-10,21.64c-3.78,5.49-5.52,6.27-11.63,3.31C11.36,520.45-1.83,513.71-15.05,507-25,502-34.6,496.26-45,492.18c-4.4-1.73-5-4.11-3.64-8.45,5-15.9,10.71-31.5,17-46.9C-31,435.3-30.49,433.7-30,432.13Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="Pedro Aguirre Cerda"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Pedro Aguirre Cerda")}
          className={
            selectedComunas.includes("Pedro Aguirre Cerda")
              ? "selected"
              : "orange"
          }
        />
        <path
          d="M99,78.95c-.33,7,.34,14-.62,20.95-.74,5.33,3.21,7.08,7.33,7.63,4.39.59,5.29,2.28,4.62,6.61C108,129.72,103.59,145,104,161c.08,3.22-1.47,3.48-4.16,2.56-18-6.1-36.54-10.13-54.91-14.7-8.37-2.08-13.37-5.8-16.79-13.31-2.15-4.71-6.62-7.92-10.46-11.29C6.09,114.12,1.77,101.19.81,86.23,0,73.13.41,59.94-1.71,46.93c-.5-3,1-4.52,3.53-5.76,13.93-6.78,28.63-10.45,44-12.33,10-1.22,20,0,29.89-1.44C78.87,27,79.81,28.8,80,31.52a85.56,85.56,0,0,0,.74,9.93C82,48.52,85.46,53.91,93,55.44c4.83,1,6.45,3.72,6.09,8.52C98.76,68.93,99,73.95,99,78.95Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Independencia"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Independencia")}
          className={
            selectedComunas.includes("Independencia") ? "selected" : "green"
          }
        />
        <path
          d="M-104,223.46c-.33,14.36,3.24,28.39,3.56,42.69.17,7.62,1.39,15.19.68,22.86-.33,3.49-2.13,4.82-5.27,5.53-10.3,2.32-20.33,1.44-30.59-.95-10.5-2.45-21.3-3.64-31.71-6.66-10.05-2.92-19.55-7.42-29.72-10.05-6.26-1.62-12.28-4.11-18.52-5.81-3.31-.9-5.17-2.29-5.64-5.9a75.54,75.54,0,0,1-.75-11.44c.08-3.43-.37-6.65-3-9.22a3.72,3.72,0,0,1-1.43-3.08c1.56-11.21-1.17-22.2-1.6-33.3-.28-7.19-1.66-9.11,8.31-9.48,6.44-.24,13-.71,19.41-1,7.27-.37,13.88,3.09,20.57,5.6,4.21,1.58,8.31,3.45,12.57,4.88,5.63,1.88,9.06.58,11.26-4.94,1.33-3.35,3.1-3.84,6.06-3,4.74,1.28,9.6.88,14.42.81,6.06-.1,12,.35,17.57,2.94a11.5,11.5,0,0,0,7.82.65c3.44-.88,4.75.55,5.11,4A102.75,102.75,0,0,1-104,223.46Z"
          transform="translate(585.09 634.09)"
          fill="green"
          name="Lo Prado"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Lo Prado")}
          className={
            selectedComunas.includes("Lo Prado") ? "selected" : "green"
          }
        />
        <path
          d="M567.11,773.66c-6.31-4.71-14-6.76-20.61-11-2.6-1.68-5-.14-5.52,2.91A62.72,62.72,0,0,0,540,776c0,11-.38,22-1.16,33-.28,3.94-1,6.83-6.24,5.74-4.3-.89-6.63,2-7.07,5.92a85,85,0,0,0-.3,12.46c.37,10.49,1.06,21,1.35,31.45.14,4.94,2,8.88,6,11.47,7.87,5.13,10.5,12.78,10.33,21.47-.16,8.42,3.28,14.3,10.31,18.56,5.55,3.37,10.86,7.14,16.44,10.46,4.89,2.91,9,2.34,13.26-1.37a11.55,11.55,0,0,0,2.71-2.92c5.51-10.07,14.08-12.41,25-11.64,17.84,1.25,35.61-.9,53.29-3.37,10.75-1.5,21.58-1.75,32.39-2.35,4-.22,5.24,1.29,5.14,5.15-.12,4.36.13,7.9-4.9,10.67-4.59,2.53-5.76,8.47-3.7,13.42,3.29,7.9-1.42,13.81-3.84,20.35-.56,1.53-2.13,1.37-3.44,1.5a19,19,0,0,1-9.76-1.65c-5.25-2.35-9.33-.63-13,3.29-3.42,3.69-2.54,7.67-.81,11.63,4,9.18,2.15,18.2-5.21,24.72-3.46,3.06-13.16,4.17-17.13,2.09-1.64-.86-1.77-2.21-1.92-3.74-.23-2.32-.45-4.65-.9-6.93-1.28-6.43-6.81-9.23-12.81-6.65-3.92,1.69-5.61,4.88-3.63,8.44,3,5.44,1.57,10.21-1.56,14.39-2.5,3.34-12.09,3.6-16.61.85-4.28-2.61-9-3.22-13.68-4.44-8-2.1-14.37.68-20.06,6q-4.57,4.26-9,8.63c-4,3.87-8.4,4.89-13.74,3.07-8.35-2.84-16.72-5.59-25.3-7.78-7.71-2-14.11-.1-20,4.76-10.33,8.57-21.79,10.47-34.63,6.63-10.2-3.05-20.95,2.68-24.66,13.45-2,5.7-5.09,7.49-10.69,7.16-7.63-.44-13.8,3.13-19.29,8.06A92,92,0,0,0,389,1077.16c-1.74,3.68-4.13,5.35-8.08,5.23-2-.06-4,.12-6,.25-5.28.33-9.33,2.56-11.15,7.75-2.82,8.05-9.65,12-16.23,16.25-3,1.91-5,1-6.89-2.06-3.1-5.24-5.8-6-11.17-3.06a18.89,18.89,0,0,1-13.06,2c-7.81-1.55-14.8.65-21.56,4.23a190.87,190.87,0,0,0-25.3,5.73c-7.67,2.44-15.19,2.35-23.12.76-12.18-2.44-24-7.27-36.76-6.41-2.69.18-3.24-1.65-2.2-3.63,5.2-10,4-20.91,4.07-31.41a195.56,195.56,0,0,1,5.05-43c3.21-13.94,2.8-28.12,2.45-42.28-.17-7-.5-14-.52-21s.07-7.42,7.31-8.26c13.72-1.59,27.38-3.51,41-6,7.52-1.36,14.68-4.26,22.38-4.88,2.74-.22,4.37-2.3,4.06-5.33a49.58,49.58,0,0,0-.75-6.44c-4.21-17.73-2.88-35.74-2.64-53.68.07-5-.79-9.42-3.86-13.57-7.07-9.57-8-21-8.75-32.29-.57-9.14-.68-18.31-1.21-27.45-.19-3.31.74-5.28,4-6.39q16.3-5.54,32.47-11.46a5.87,5.87,0,0,1,5.67.53c15,10,31.59,10.11,48.58,7.45,7.46-1.17,8.32-1.89,9.35-9.24.46-3.29.59-6.62.75-9.95.09-1.81.33-3.44,2.56-3.55,17-.86,32.63-7.86,49.11-11.08,15.36-3,30.73-5.91,46.09-8.88,7.31-1.42,8-3.14,3.48-9.07-11.35-15-20.58-31.49-31.13-47.05-1.94-2.86-.46-3.29,2.12-3.32,14-.15,27.94-.49,41.91.48a11,11,0,0,1,8.21,3.93c4.36,5,8.8,10,14.5,13.64,2.86,1.84,5,2.13,7.31-.69a64.94,64.94,0,0,1,6.34-6.37c1.17-1.07,2.18-3.17,3.95-2.55,1.4.49,1.07,2.6,1.38,4,.07.33.11.66.19,1,1.2,5.25,3.14,6.58,8.56,5.8,8.24-1.19,16.49-2.39,24.49-4.79,3.92-1.17,5.11-.1,5.21,4.21.42,18.18-1.2,36.26-2.25,54.36C568.9,771.17,569.49,773.14,567.11,773.66Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="Puente Alto"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("Puente Alto")}
          className={
            selectedComunas.includes("Puente Alto") ? "selected" : "pink"
          }
        />
        <path
          d="M539.84,689.77c-6.65,6-13.44,11.9-19.87,18.15-2.36,2.3-4,2.21-6.38.41-5.35-4.07-9.73-9.1-14-14.19-2.27-2.69-4.68-3.59-7.87-2.26a16.16,16.16,0,0,1-7.35,1c-14.12-.87-28.3-.48-42.39-2-1.75-.19-3.87-.93-5,1.12-1,1.9.32,3.41,1.42,4.93,11.31,15.46,21.28,31.82,31.73,47.85a8,8,0,0,0,.91,1.71c2.18,3.46,1.78,4.38-2.07,5a43.12,43.12,0,0,0-7.93,1.64c-16.35,3.9-33,6.62-49.23,10.87-11.89,3.11-23.46,7.64-36,8.17-3.24.14-3.64,3-3.91,5.54-.44,4-.81,8-1,11.94-.1,2.7-1.36,3.79-3.91,4.16-8.42,1.22-16.87,2.33-25.38,1.74-6.81-.47-12.69-4.06-18.55-7-6.65-3.38-12.77-3.65-19.55-.82-8.44,3.53-17.14,6.46-25.61,9.91-3.83,1.56-5.37.72-5.91-3.41-1.27-9.74-2.84-19.43-4.36-29.14-.34-2.14,0-3.85,2.45-3.88,5.35-.06,5.32-3.38,4.58-7.19-2.48-12.78-6.3-25.19-10.24-37.57-2.07-6.5-3.67-13.15-5.69-19.66-1.21-3.89.35-5,4-5.14,10.06-.26,10-.32,9.61-10.8-1.32-32.11-3.88-64.16-4.75-96.3-.39-14.51.28-29,1.08-43.44.37-6.71.06-13-5.59-18.33,3.88-1.52,7.31-1.43,10.67-1.57,19.84-.8,39.62.49,59.39,1.84,30.4,2.07,60.8,4,91.19,6.12,9.13.64,18.21,2.34,27.34,2.55,24.61.54,49.22.56,73.84.73,4.32,0,8.65-.1,13-.36,2.64-.16,5.32-.47,7.65-1.95l-.1,0c5.52-.83,9.85-3.83,13.78-7.55,1.7-1.61,3.41-3.33,5.81-3.71,2.61-.41,5.85-1.19,7.64.75,1.53,1.66-.88,3.94-1.78,5.81-2.78,5.76-2.42,12-3.17,18.09-1.39,11.31.25,22.6-.13,33.9-.1,3.09,2.59,3,4.75,3.09,10.48.37,21,1.23,31.46.19,4.71-.47,6.81,1.09,6.26,6.05-.53,4.8-.72,9.63-.92,14.46-.13,3-1.58,3.91-4.5,3.74-19.95-1.21-39.91-2.15-59.85-3.57-4.41-.31-5.63,1-5.69,5.08-.1,6.49-.68,13-.77,19.47,0,3.15-1.07,4.48-4.32,4.53-4.32.06-8.65.42-13,.88-2.2.23-5.07-.15-5.76,2.87a7.58,7.58,0,0,0,2.73,8.07c3.14,2.47,6.46,4.7,9.6,7.16,10.47,8.16,14.73,19.33,15.73,32.19.3,3.84-2.83,5.43-4.18,8.15Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="La Florida"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("La Florida")}
          className={
            selectedComunas.includes("La Florida") ? "selected" : "pink"
          }
        />
        <path
          d="M168.6,1059.7c-4.66.22-9.36.12-14,.74-4,.54-5.29-1.41-5.31-4.65,0-4,.53-8,.61-11.95.08-4.63.61-9.48-5.22-11.66-1.86-.69-1.44-2.79-1.18-4.45,2.22-14.13,3.52-28.39,6.48-42.4.88-4.2-2.22-4.3-4.82-4.47-8.64-.56-17.23-1.48-25.82-2.56-10.75-1.36-21.43-3.14-32-5.45C78.8,971,70.25,970.75,61.57,971c-7.53.26-7.48.22-5.75-7.34,5.89-25.81,12.61-51.46,17.33-77.48,4.15-22.86,12.21-44.65,16.56-67.35,4.9-25.5,9-51.16,13.08-76.81.77-4.78,2.32-6.82,7.28-6.09,13.17,1.93,26.38,3.64,39.57,5.49,15.18,2.14,30.46,3.93,45.74,3.69,17.82-.28,35.38-3.5,52.72-7.72,3.55-.86,7.19-1.4,10.75-2.25,2.88-.68,4.42.45,5.18,3.15,1,3.69,2.15,7.35,3.27,11,1.05,3.46,2.25,6.74-3.12,7.91-2.36.51-2.39,3.13-2,5.09,2.89,14.14,3.3,28.73,8.27,42.54,1.69,4.68,1.25,10.2,1.43,15.34.34,9.82.84,19.62,1.9,29.4.89,8.19,4.18,15.39,8.8,22a16.62,16.62,0,0,1,3.27,10.22c-.35,18.46-1.25,36.95,2.83,55.18.91,4-.88,6.28-4.69,7.43-14.89,4.46-30.16,6.9-45.56,8.62-6.11.68-12.25.93-18.35,2-4.67.83-5.92,3.31-5.75,7.63.44,11.15.62,22.31.94,33.46.4,13.93-1.73,27.56-4.86,41.07a107.91,107.91,0,0,0-2.5,16.78c-.21,3-1.29,4.9-4.88,4.85-11.48-.15-23-.05-34.45-.05Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="La Pintana"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("La Pintana")}
          className={
            selectedComunas.includes("La Pintana") ? "selected" : "pink"
          }
        />
        <path
          d="M67.18,869.11c-16.95-4.5-34.88-4.39-51.18-12.45C-10.11,843.76-37.77,834.25-63.77,821c-3.57-1.82-4.29-3.56-2.62-6.91,2.16-4.32,3.84-8.91,6.33-13,7.59-12.55,7.84-26.63,8.91-40.55.41-5.31.72-10.63,1-15.95.12-2.49.89-3.72,3.68-3,4,1,6.65-1,8.64-4.29,7.09-11.87,10.1-25.31,14.69-38.13,3.08-8.62,5.9-17.32,9.28-25.84,1.71-4.31,3.91-5,8-3,26,12.57,52.58,23.47,81.1,29.08A88.53,88.53,0,0,0,99.59,701c4-.32,5.83.54,5,5.22-6.62,37-12.69,74.15-19.71,111.09-3,15.83-7.85,31.31-11.9,46.94C72.22,867.12,71.08,869.72,67.18,869.11Z"
          transform="translate(585.09 634.09)"
          fill="orange"
          name="El Bosque"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("El Bosque")}
          className={
            selectedComunas.includes("El Bosque") ? "selected" : "orange"
          }
        />
        <path
          d="M205.07,562.12c4.39-.63,7.37-3.77,10.61-6.26,13.15-10.11,28.74-12.63,44.49-14.7,3.35-.44,3.85,1.94,3.73,4.5-.23,4.82-.78,9.63-.79,14.45-.07,35.47,2,70.87,4.29,106.25.36,5.66-.77,11.3.15,17,.36,2.19-.69,3.28-3.17,3.28-14.49,0-13.17,2.28-10.56,15,1.68,8.17,4.16,16.12,6.58,24.08.79,2.6,1.13,5.05-2.59,5.6-17.92,2.64-35.31,8.56-53.64,8.68-7.15,0-6.92.05-7.17-7.13-.62-17.64-3-35.13-5.1-52.63-2.59-21.3-4.29-42.71-7.9-63.88-2.68-15.75-5.4-31.49-8.32-47.19-.77-4.15,0-5.31,4.47-4.72a52.18,52.18,0,0,0,25-2.28Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="La Granja"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("La Granja")}
          className={
            selectedComunas.includes("La Granja") ? "selected" : "pink"
          }
        />
        <path
          d="M181.35,740c-18.08-1-37.57-4.81-57.2-7.45q-6.19-.83-12.37-1.75c-6.73-1-6.7-1.06-5.72-8,1.55-10.88,4.25-21.51,7-32.14,6.11-23.89,11-48,16-72.19a517.45,517.45,0,0,1,13.91-52.12c1.25-3.92,3.27-4.8,7-4a140.68,140.68,0,0,0,14.77,2.51c3.16.36,4.77,1.69,5.32,4.82,4.75,26.72,10.28,53.29,13,80.37,2.55,25.35,5.89,50.61,8.86,75.91.18,1.49.27,3,.37,4.48C192.87,740.24,192.87,740.24,181.35,740Z"
          transform="translate(585.09 634.09)"
          fill="pink"
          name="San Ramon"
          onMouseOver={handleMouseOver}
          onMouseOut={handleMouseOut}
          onClick={() => handleComunaClick("San Ramon")}
          className={
            selectedComunas.includes("San Ramon") ? "selected" : "pink"
          }
        />
      </svg>
      <div className="end-container">
        <button onClick={handleEndTurnClick}>End Turn</button>
      </div>
      {selectedComunas.length === 1 && (
        <div className="assing-container">
          <div className="info-comuna-assing">
            <span>Commune: {comunaClickeada}</span>
            <span>Troops: {troopClickeada}</span>
            <span>Player: {playerClickeado}</span>
          </div>
          <div className="dialog-container">
            <div className="dialog-content">
              <h4 className="add-title">Available Troops: {availableTroops}</h4>
              <h4 className="add-title">Choose Number of Troops to Add</h4>
              <input
                className="add-input"
                type="number"
                value={troopsToAdd}
                min="0"
                onChange={(e) => setTroopsToAdd(Number(e.target.value))}
              />
              <button className="add-button" onClick={handleAddClick}>
                Add Troops
              </button>
            </div>
          </div>
        </div>
      )}
      {hoveredComuna && (
        <div className="info-comuna">
          <span>Commune: {hoveredComuna}</span>
          <span>Troops: {troop}</span>
          <span>Player: {player}</span>
        </div>
      )}
      {selectedComunas.length === 2 && !attackMode && !showDice && (
        <div className="button-container">
          <button className="attack-button" onClick={handleAttackClick}>
            Attack
          </button>
        </div>
      )}
      {attackMode && selectedComunas.length === 2 && (
        <div className="button-container">
          <button className="dice-button" onClick={handleDiceClick}>
            Throw Dice
          </button>
          <button className="dice-button" onClick={handleCancelClick}>
            Exit
          </button>
        </div>
      )}

      {showDice && (
        <div className="dice-container">
          <div className="dice">
            <Dado value={dice1} />
            <h5>Your Dice</h5>
          </div>
          <div className="dice">
            <Dado value={dice2} />
            <h5>Defenders Dice</h5>
          </div>
        </div>
      )}
      {diceThrow && (
        <div className="button-container">
          <button className="dice-button" onClick={handleCancelClick}>
            Keep attacking
          </button>
        </div>
      )}
    </div>
  );
};

export default Map;
